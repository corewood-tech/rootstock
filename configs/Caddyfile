:9999 {
	# Observability
	handle /grafana/* {
		reverse_proxy grafana:3000
	}
	handle /prometheus/* {
		reverse_proxy prometheus:9090
	}

	# Maildev
	handle /maildev/* {
		reverse_proxy maildev:1080
	}

	# App UI
	handle /app/* {
		reverse_proxy ui:5173
	}

	# Connect RPC
	handle /rootstock.v1.* {
		reverse_proxy web-server:8080
	}

	# Device enrollment + CA cert (plain HTTP on same port as RPC)
	handle /enroll {
		reverse_proxy web-server:8080
	}
	handle /ca {
		reverse_proxy web-server:8080
	}

	# Login v2 UI
	handle /ui/v2/login/* {
		reverse_proxy zitadel-login:3000
	}

	# Zitadel â€” catch-all
	handle {
		reverse_proxy zitadel:8080 {
			header_up Host localhost:9999
			header_up X-Forwarded-For {http.request.remote}
			header_up X-Forwarded-Proto {http.request.scheme}
			header_up X-Forwarded-Host localhost:9999
		}
	}
}
